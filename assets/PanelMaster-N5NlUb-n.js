import{a as s,_ as I,o as F,c as w,P as u,m as M,j as e}from"./index-CRoUJ-Kk.js";import"./DefaultLayout-BO-JIfQ7.js";import"./index.esm-BvefGP5m.js";import{d as P,i as _,j as B}from"./api-B6GpI7jj.js";import{c as f}from"./toastUtils-BGPyRSrq.js";import{C as H,a as L}from"./CRow-DQagI_yU.js";import{C as R,a as V}from"./CCardBody-8UxDYOE8.js";import{C as A}from"./CCardHeader-CMdE5fnU.js";import{C as D,a as O,b as v,c as T,d as U,e as N}from"./CTable-CVricjU4.js";import{C as W,a as q,b as z,c as G,d as J}from"./CModalTitle-CDMCoL_r.js";import{C as K}from"./CForm-CW2No29V.js";import{b as E,a as k,C as Q}from"./CFormInput-4Tk5A6pl.js";import{a as S}from"./CContainer-DM8QGVfn.js";import"./hz_logo_5-CkN2Sfpu.js";import"./cil-user-Ddrdy7PS.js";const g=s.forwardRef((r,n)=>{var{children:y,className:o,feedback:C,feedbackInvalid:t,feedbackValid:i,floatingClassName:d,floatingLabel:h,id:c,invalid:l,label:m,plainText:b,text:p,tooltipFeedback:j,valid:x}=r,a=I(r,["children","className","feedback","feedbackInvalid","feedbackValid","floatingClassName","floatingLabel","id","invalid","label","plainText","text","tooltipFeedback","valid"]);return F.createElement(E,{describedby:a["aria-describedby"],feedback:C,feedbackInvalid:t,feedbackValid:i,floatingClassName:d,floatingLabel:h,id:c,invalid:l,label:m,text:p,tooltipFeedback:j,valid:x},F.createElement("textarea",Object.assign({className:w(b?"form-control-plaintext":"form-control",{"is-invalid":l,"is-valid":x},o),id:c},a,{ref:n}),y))});g.propTypes=Object.assign({className:u.string,id:u.string,plainText:u.bool},E.propTypes);g.displayName="CFormTextarea";const pe=()=>{const[r,n]=s.useState([]),[y,o]=s.useState(null),[C,t]=s.useState(!1),[i,d]=s.useState(""),[h,c]=s.useState(""),[l,m]=s.useState("");M();const[b,p]=s.useState(!1);s.useEffect(()=>{p(!1),j()},[]);const j=async()=>{try{const a=await P();n(a)}catch{o("Failed to load panels"),f("Internal Server Error",2)}},x=async()=>{try{b?(await _({panel_name:i,description:l},h),c(""),f("Updated Successfully!",1)):(await B({panel_name:i,description:l}),f("Created Successfully!",1)),d(""),m(""),t(!1);const a=await P();n(a),p(!1)}catch(a){console.error("Failed to save panel:",a),o("Failed to save panel"),f("Internal Server Error",2)}};return e.jsxs(e.Fragment,{children:[e.jsx(H,{children:e.jsx(L,{xs:12,children:e.jsxs(R,{className:"mb-4",children:[e.jsx(A,{children:e.jsx("strong",{children:"All Panels"})}),e.jsx(V,{children:e.jsxs(D,{children:[e.jsx(O,{children:e.jsxs(v,{children:[e.jsx(T,{scope:"col",children:"Panel Name"}),e.jsx(T,{scope:"col",children:"No. of Files"})]})}),e.jsx(U,{children:r.length>0?r.map((a,X)=>e.jsxs(v,{children:[e.jsx(N,{children:a.panel_name}),e.jsx(N,{children:a.file_count})]},a.panel_id)):e.jsx(v,{children:e.jsx(N,{colSpan:2,className:"text-center",children:"No record found"})})})]})})]})})}),e.jsxs(W,{alignment:"center",visible:C,onClose:()=>t(!1),children:[e.jsx(q,{children:e.jsx(z,{children:"Add Panel"})}),e.jsx(G,{children:e.jsxs(K,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(k,{htmlFor:"panelName",children:"Panel Name"}),e.jsx(Q,{type:"text",id:"panelName",value:i,onChange:a=>d(a.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(k,{htmlFor:"description",children:"Description"}),e.jsx(g,{id:"description",rows:3,value:l,onChange:a=>m(a.target.value)})]})]})}),e.jsxs(J,{children:[e.jsx(S,{color:"secondary",onClick:()=>t(!1),children:"Close"}),e.jsx(S,{color:"primary",onClick:x,children:"Save changes"})]})]})]})};export{pe as default};
