import{a as l,_ as w,o as y,b as E,c as M,P as v,n as L,j as e}from"./index-BJnB7-P9.js";import"./DefaultLayout-CP4p5yeb.js";import{a as F}from"./index.esm-Blw1aIcw.js";import{c as P,h as V,i as B}from"./api-CWYGUJ6F.js";import{c as x}from"./toastUtils-BmKKWACl.js";import{C as H,a as R}from"./CRow-AKZvr59B.js";import{C as A,a as D}from"./CCardBody-Dgv68Eah.js";import{C as U}from"./CCardHeader-Cjq9zSFS.js";import{C as W,a as q,b as u,c as T,d as z,e as N}from"./CTable-C-3GRcFL.js";import{C as G,a as J,b as K,c as O,d as Q}from"./CModalTitle-rmFWaGuk.js";import{C as X}from"./CForm-CBc4usKm.js";import{b as I,a as S,C as Y}from"./CFormInput-CRhdOc9N.js";import"./hz_logo_5-Dk2kY2vZ.js";import"./cil-user-Ddrdy7PS.js";var g=l.forwardRef(function(a,n){var k=a.children,o=a.className,C=a.feedback,r=a.feedbackInvalid,i=a.feedbackValid,d=a.floatingClassName,b=a.floatingLabel,c=a.id,t=a.invalid,m=a.label,h=a.plainText,p=a.text,j=a.tooltipFeedback,f=a.valid,s=w(a,["children","className","feedback","feedbackInvalid","feedbackValid","floatingClassName","floatingLabel","id","invalid","label","plainText","text","tooltipFeedback","valid"]);return y.createElement(I,{describedby:s["aria-describedby"],feedback:C,feedbackInvalid:r,feedbackValid:i,floatingClassName:d,floatingLabel:b,id:c,invalid:t,label:m,text:p,tooltipFeedback:j,valid:f},y.createElement("textarea",E({className:M(h?"form-control-plaintext":"form-control",{"is-invalid":t,"is-valid":f},o),id:c},s,{ref:n}),k))});g.propTypes=E({className:v.string,id:v.string,plainText:v.bool},I.propTypes);g.displayName="CFormTextarea";const pe=()=>{const[a,n]=l.useState([]),[k,o]=l.useState(null),[C,r]=l.useState(!1),[i,d]=l.useState(""),[b,c]=l.useState(""),[t,m]=l.useState("");L();const[h,p]=l.useState(!1);l.useEffect(()=>{p(!1),j()},[]);const j=async()=>{try{const s=await P();n(s)}catch{o("Failed to load panels"),x("Internal Server Error",2)}},f=async()=>{try{h?(await V({panel_name:i,description:t},b),c(""),x("Updated Successfully!",1)):(await B({panel_name:i,description:t}),x("Created Successfully!",1)),d(""),m(""),r(!1);const s=await P();n(s),p(!1)}catch(s){console.error("Failed to save panel:",s),o("Failed to save panel"),x("Internal Server Error",2)}};return e.jsxs(e.Fragment,{children:[e.jsx(H,{children:e.jsx(R,{xs:12,children:e.jsxs(A,{className:"mb-4",children:[e.jsx(U,{children:e.jsx("strong",{children:"All Panels"})}),e.jsx(D,{children:e.jsxs(W,{children:[e.jsx(q,{children:e.jsxs(u,{children:[e.jsx(T,{scope:"col",children:"Panel Name"}),e.jsx(T,{scope:"col",children:"No. of Files"})]})}),e.jsx(z,{children:a.length>0?a.map((s,Z)=>e.jsxs(u,{children:[e.jsx(N,{children:s.panel_name}),e.jsx(N,{children:s.file_count})]},s.panel_id)):e.jsx(u,{children:e.jsx(N,{colSpan:2,className:"text-center",children:"No record found"})})})]})})]})})}),e.jsxs(G,{alignment:"center",visible:C,onClose:()=>r(!1),children:[e.jsx(J,{children:e.jsx(K,{children:"Add Panel"})}),e.jsx(O,{children:e.jsxs(X,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(S,{htmlFor:"panelName",children:"Panel Name"}),e.jsx(Y,{type:"text",id:"panelName",value:i,onChange:s=>d(s.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(S,{htmlFor:"description",children:"Description"}),e.jsx(g,{id:"description",rows:3,value:t,onChange:s=>m(s.target.value)})]})]})}),e.jsxs(Q,{children:[e.jsx(F,{color:"secondary",onClick:()=>r(!1),children:"Close"}),e.jsx(F,{color:"primary",onClick:f,children:"Save changes"})]})]})]})};export{pe as default};
