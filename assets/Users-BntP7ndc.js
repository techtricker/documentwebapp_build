import{a as l,_ as M,o as y,b as T,c as F,P as v,j as r,n as Pe}from"./index-CKGnXotc.js";import{_ as Ue,f as De,c as Me,T as Fe,u as Le}from"./DefaultLayout-C7rnAVgk.js";import{C as $e,a as Q,c as le}from"./index.esm-DlVPDgWh.js";import{b as ye,c as Ke,d as We,e as Be,f as ze}from"./api-CWYGUJ6F.js";import{c as $}from"./toastUtils-xiIc7IO0.js";import{C as H,a as K}from"./CRow-BtPzcymT.js";import{C as Ne,a as je}from"./CCardBody-B7W5Qvwr.js";import{C as He}from"./CCardHeader-BtcJ9qJK.js";import{c as Ve}from"./cil-user-Ddrdy7PS.js";import{c as Ze}from"./cil-trash-CBbKHhHb.js";import{C as Ee,a as we,b as Se,c as Ae,d as ke}from"./CModalTitle-DgbJvHRi.js";import{C as qe}from"./CForm-CXzVUClb.js";import{a as X,C as oe}from"./CFormInput-0j4aG28x.js";import"./hz_logo_5-Sdk6aiYd.js";var _e=l.createContext({}),de=l.forwardRef(function(e,a){var t=e.children,s=e.activeItemKey,c=e.alwaysOpen,d=c===void 0?!1:c,m=e.className,o=e.flush,i=M(e,["children","activeItemKey","alwaysOpen","className","flush"]),n=l.useState(s),h=n[0],p=n[1];return y.createElement("div",T({className:F("accordion",{"accordion-flush":o},m)},i,{ref:a}),y.createElement(_e.Provider,{value:{_activeItemKey:h,alwaysOpen:d,setActiveKey:p}},t))});de.propTypes={activeItemKey:v.oneOfType([v.number,v.string]),alwaysOpen:v.bool,children:v.node,className:v.string,flush:v.bool};de.displayName="CAccordion";function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var s in t)({}).hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},ce.apply(null,arguments)}function Qe(e,a){return e.classList?!!a&&e.classList.contains(a):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+a+" ")!==-1}function Je(e,a){e.classList?e.classList.add(a):Qe(e,a)||(typeof e.className=="string"?e.className=e.className+" "+a:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+a))}function Re(e,a){return e.replace(new RegExp("(^|\\s)"+a+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Xe(e,a){e.classList?e.classList.remove(a):typeof e.className=="string"?e.className=Re(e.className,a):e.setAttribute("class",Re(e.className&&e.className.baseVal||"",a))}var Ye=function(a,t){return a&&t&&t.split(" ").forEach(function(s){return Je(a,s)})},ie=function(a,t){return a&&t&&t.split(" ").forEach(function(s){return Xe(a,s)})},ue=function(e){Ue(a,e);function a(){for(var s,c=arguments.length,d=new Array(c),m=0;m<c;m++)d[m]=arguments[m];return s=e.call.apply(e,[this].concat(d))||this,s.appliedClasses={appear:{},enter:{},exit:{}},s.onEnter=function(o,i){var n=s.resolveArguments(o,i),h=n[0],p=n[1];s.removeClasses(h,"exit"),s.addClass(h,p?"appear":"enter","base"),s.props.onEnter&&s.props.onEnter(o,i)},s.onEntering=function(o,i){var n=s.resolveArguments(o,i),h=n[0],p=n[1],N=p?"appear":"enter";s.addClass(h,N,"active"),s.props.onEntering&&s.props.onEntering(o,i)},s.onEntered=function(o,i){var n=s.resolveArguments(o,i),h=n[0],p=n[1],N=p?"appear":"enter";s.removeClasses(h,N),s.addClass(h,N,"done"),s.props.onEntered&&s.props.onEntered(o,i)},s.onExit=function(o){var i=s.resolveArguments(o),n=i[0];s.removeClasses(n,"appear"),s.removeClasses(n,"enter"),s.addClass(n,"exit","base"),s.props.onExit&&s.props.onExit(o)},s.onExiting=function(o){var i=s.resolveArguments(o),n=i[0];s.addClass(n,"exit","active"),s.props.onExiting&&s.props.onExiting(o)},s.onExited=function(o){var i=s.resolveArguments(o),n=i[0];s.removeClasses(n,"exit"),s.addClass(n,"exit","done"),s.props.onExited&&s.props.onExited(o)},s.resolveArguments=function(o,i){return s.props.nodeRef?[s.props.nodeRef.current,o]:[o,i]},s.getClassNames=function(o){var i=s.props.classNames,n=typeof i=="string",h=n&&i?i+"-":"",p=n?""+h+o:i[o],N=n?p+"-active":i[o+"Active"],b=n?p+"-done":i[o+"Done"];return{baseClassName:p,activeClassName:N,doneClassName:b}},s}var t=a.prototype;return t.addClass=function(c,d,m){var o=this.getClassNames(d)[m+"ClassName"],i=this.getClassNames("enter"),n=i.doneClassName;d==="appear"&&m==="done"&&n&&(o+=" "+n),m==="active"&&c&&De(c),o&&(this.appliedClasses[d][m]=o,Ye(c,o))},t.removeClasses=function(c,d){var m=this.appliedClasses[d],o=m.base,i=m.active,n=m.done;this.appliedClasses[d]={},o&&ie(c,o),i&&ie(c,i),n&&ie(c,n)},t.render=function(){var c=this.props;c.classNames;var d=Me(c,["classNames"]);return y.createElement(Fe,ce({},d,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},a}(y.Component);ue.defaultProps={classNames:""};ue.propTypes={};var me=l.forwardRef(function(e,a){var t=e.children,s=e.className,c=e.horizontal,d=e.onHide,m=e.onShow,o=e.visible,i=M(e,["children","className","horizontal","onHide","onShow","visible"]),n=l.useRef(null),h=Le(a,n),p=l.useState(),N=p[0],b=p[1],j=l.useState(),C=j[0],x=j[1],L=function(){if(m&&m(),c){n.current&&x(n.current.scrollWidth);return}n.current&&b(n.current.scrollHeight)},A=function(){if(c){x(0);return}b(0)},P=function(){if(c){n.current&&x(n.current.scrollWidth);return}n.current&&b(n.current.scrollHeight)},_=function(){if(d&&d(),c){x(0);return}b(0)},I=function(){if(c){x(0);return}b(0)};return y.createElement(ue,{in:o,nodeRef:n,onEntering:L,onEntered:A,onExit:P,onExiting:_,onExited:I,timeout:350},function(w){var R=N===0?null:{height:N},W=C===0?null:{width:C};return y.createElement("div",T({className:F(s,{"collapse-horizontal":c,collapsing:w==="entering"||w==="exiting","collapse show":w==="entered",collapse:w==="exited"}),style:T(T({},R),W)},i,{ref:h}),t)})});me.propTypes={children:v.node,className:v.string,horizontal:v.bool,onHide:v.func,onShow:v.func,visible:v.bool};me.displayName="CCollapse";var pe=l.createContext({}),he=l.forwardRef(function(e,a){var t=e.children,s=e.className,c=M(e,["children","className"]),d=l.useContext(pe),m=d.id,o=d.visible;return y.createElement(me,{className:"accordion-collapse",id:m,visible:o},y.createElement("div",T({className:F("accordion-body",s)},c,{ref:a}),t))});he.propTypes={children:v.node,className:v.string};he.displayName="CAccordionBody";var fe=l.forwardRef(function(e,a){var t=e.children,s=e.className,c=M(e,["children","className"]),d=l.useContext(pe),m=d.id,o=d.visible,i=d.setVisible;return y.createElement("button",T({type:"button",className:F("accordion-button",{collapsed:!o},s),"aria-controls":m,"aria-expanded":o,onClick:function(){return i(!o)}},c,{ref:a}),t)});fe.propTypes={children:v.node,className:v.string};fe.displayName="CAccordionButton";var ve=l.forwardRef(function(e,a){var t=e.children,s=e.className,c=M(e,["children","className"]);return y.createElement("div",T({className:F("accordion-header",s)},c,{ref:a}),y.createElement(fe,null,t))});ve.propTypes={children:v.node,className:v.string};ve.displayName="CAccordionHeader";var xe=l.forwardRef(function(e,a){var t=e.children,s=e.className,c=e.id,d=e.itemKey,m=M(e,["children","className","id","itemKey"]),o=l.useId(),i=c??o,n=l.useRef(d??i),h=l.useContext(_e),p=h._activeItemKey,N=h.alwaysOpen,b=h.setActiveKey,j=l.useState(p===n.current),C=j[0],x=j[1];return l.useEffect(function(){!N&&C&&b(n.current)},[C]),l.useEffect(function(){x(p===n.current)},[p]),y.createElement("div",T({className:F("accordion-item",s)},m,{ref:a}),y.createElement(pe.Provider,{value:{id:i,setVisible:x,visible:C}},t))});xe.propTypes={children:v.node,className:v.string,itemKey:v.oneOfType([v.number,v.string])};xe.displayName="CAccordionItem";var ge=l.forwardRef(function(e,a){var t=e.children,s=e.className,c=M(e,["children","className"]);return y.createElement($e,T({className:F("card-link",s)},c,{ref:a}),t)});ge.propTypes={children:v.node,className:v.string};ge.displayName="CCardLink";var Ce=l.forwardRef(function(e,a){var t=e.children,s=e.as,c=s===void 0?"p":s,d=e.className,m=M(e,["children","as","className"]);return y.createElement(c,T({className:F("card-text",d)},m,{ref:a}),t)});Ce.propTypes={as:v.elementType,children:v.node,className:v.string};Ce.displayName="CCardText";var be=l.forwardRef(function(e,a){var t=e.children,s=e.as,c=s===void 0?"h5":s,d=e.className,m=M(e,["children","as","className"]);return y.createElement(c,T({className:F("card-title",d)},m,{ref:a}),t)});be.propTypes={as:v.elementType,children:v.node,className:v.string};be.displayName="CCardTitle";var Ge=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M29.663,482.25l.087.087a24.847,24.847,0,0,0,17.612,7.342,25.178,25.178,0,0,0,8.1-1.345l142.006-48.172,272.5-272.5A88.832,88.832,0,0,0,344.334,42.039l-272.5,272.5L23.666,456.541A24.844,24.844,0,0,0,29.663,482.25Zm337.3-417.584a56.832,56.832,0,0,1,80.371,80.373L411.5,180.873,331.127,100.5ZM99.744,331.884,308.5,123.127,388.873,203.5,180.116,412.256,58.482,453.518Z' class='ci-primary'/>"];function es(e,{insertAt:a}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",a==="top"&&t.firstChild?t.insertBefore(s,t.firstChild):t.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}es(`.rmsc{--rmsc-main: #4285f4;--rmsc-hover: #f1f3f5;--rmsc-selected: #e2e6ea;--rmsc-border: #ccc;--rmsc-gray: #aaa;--rmsc-bg: #fff;--rmsc-p: 10px;--rmsc-radius: 4px;--rmsc-h: 38px}.rmsc *{box-sizing:border-box;transition:all .2s ease}.rmsc .gray{color:var(--rmsc-gray)}.rmsc .dropdown-content{position:absolute;z-index:1;top:100%;width:100%;padding-top:8px}.rmsc .dropdown-content .panel-content{overflow:hidden;border-radius:var(--rmsc-radius);background:var(--rmsc-bg);box-shadow:0 0 0 1px #0000001a,0 4px 11px #0000001a}.rmsc .dropdown-container{position:relative;outline:0;background-color:var(--rmsc-bg);border:1px solid var(--rmsc-border);border-radius:var(--rmsc-radius)}.rmsc .dropdown-container[aria-disabled=true]:focus-within{box-shadow:var(--rmsc-gray) 0 0 0 1px;border-color:var(--rmsc-gray)}.rmsc .dropdown-container:focus-within{box-shadow:var(--rmsc-main) 0 0 0 1px;border-color:var(--rmsc-main)}.rmsc .dropdown-heading{position:relative;padding:0 var(--rmsc-p);display:flex;align-items:center;width:100%;height:var(--rmsc-h);cursor:default;outline:0}.rmsc .dropdown-heading .dropdown-heading-value{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1}.rmsc .clear-selected-button{cursor:pointer;background:none;border:0;padding:0;display:flex}.rmsc .options{max-height:260px;overflow-y:auto;margin:0;padding-left:0}.rmsc .options li{list-style:none;margin:0}.rmsc .select-item{box-sizing:border-box;cursor:pointer;display:block;padding:var(--rmsc-p);outline-offset:-1px;outline-color:var(--rmsc-primary)}.rmsc .select-item:hover{background:var(--rmsc-hover)}.rmsc .select-item.selected{background:var(--rmsc-selected)}.rmsc .no-options{padding:var(--rmsc-p);text-align:center;color:var(--rmsc-gray)}.rmsc .search{width:100%;position:relative;border-bottom:1px solid var(--rmsc-border)}.rmsc .search input{background:none;height:var(--rmsc-h);padding:0 var(--rmsc-p);width:100%;outline:0;border:0;font-size:1em}.rmsc .search input:focus{background:var(--rmsc-hover)}.rmsc .search-clear-button{cursor:pointer;position:absolute;top:0;right:0;bottom:0;background:none;border:0;padding:0 calc(var(--rmsc-p) / 2)}.rmsc .search-clear-button [hidden]{display:none}.rmsc .item-renderer{display:flex;align-items:baseline}.rmsc .item-renderer input{margin:0 5px 0 0}.rmsc .item-renderer.disabled{opacity:.5}.rmsc .spinner{animation:rotate 2s linear infinite}.rmsc .spinner .path{stroke:var(--rmsc-border);stroke-width:4px;stroke-linecap:round;animation:dash 1.5s ease-in-out infinite}@keyframes rotate{to{transform:rotate(360deg)}}@keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}to{stroke-dasharray:90,150;stroke-dashoffset:-124}}
`);var ss={allItemsAreSelected:"All items are selected.",clearSearch:"Clear Search",clearSelected:"Clear Selected",noOptions:"No options",search:"Search",selectAll:"Select All",selectAllFiltered:"Select All (Filtered)",selectSomeItems:"Select...",create:"Create"},rs={value:[],hasSelectAll:!0,className:"multi-select",debounceDuration:200,options:[]},Ie=y.createContext({}),as=({props:e,children:a})=>{let[t,s]=l.useState(e.options),c=d=>{var m;return((m=e.overrideStrings)==null?void 0:m[d])||ss[d]};return l.useEffect(()=>{s(e.options)},[e.options]),r.jsx(Ie.Provider,{value:{t:c,...rs,...e,options:t,setOptions:s},children:a})},G=()=>y.useContext(Ie);function ts(e,a){let t=l.useRef(!1);l.useEffect(()=>{t.current?e():t.current=!0},a)}var ns={when:!0,eventTypes:["keydown"]};function Y(e,a,t){let s=l.useMemo(()=>Array.isArray(e)?e:[e],[e]),c=Object.assign({},ns,t),{when:d,eventTypes:m}=c,o=l.useRef(a),{target:i}=c;l.useEffect(()=>{o.current=a});let n=l.useCallback(h=>{s.some(p=>h.key===p||h.code===p)&&o.current(h)},[s]);l.useEffect(()=>{if(d&&typeof window<"u"){let h=i?i.current:window;return m.forEach(p=>{h&&h.addEventListener(p,n)}),()=>{m.forEach(p=>{h&&h.removeEventListener(p,n)})}}},[d,m,s,i,a])}var k={ARROW_DOWN:"ArrowDown",ARROW_UP:"ArrowUp",ENTER:"Enter",ESCAPE:"Escape",SPACE:"Space"},ls=(e,a)=>{let t;return function(...s){clearTimeout(t),t=setTimeout(()=>{e.apply(null,s)},a)}};function os(e,a){return a?e.filter(({label:t,value:s})=>t!=null&&s!=null&&t.toLowerCase().includes(a.toLowerCase())):e}var Te=()=>r.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"dropdown-search-clear-icon gray",children:[r.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),is=({checked:e,option:a,onClick:t,disabled:s})=>r.jsxs("div",{className:`item-renderer ${s?"disabled":""}`,children:[r.jsx("input",{type:"checkbox",onChange:t,checked:e,tabIndex:-1,disabled:s}),r.jsx("span",{children:a.label})]}),cs=is,ds=({itemRenderer:e=cs,option:a,checked:t,tabIndex:s,disabled:c,onSelectionChanged:d,onClick:m})=>{let o=l.useRef(),i=p=>{n(),p.preventDefault()},n=()=>{c||d(!t)},h=p=>{n(),m(p)};return Y([k.ENTER,k.SPACE],i,{target:o}),r.jsx("label",{className:`select-item ${t?"selected":""}`,role:"option","aria-selected":t,tabIndex:s,ref:o,children:r.jsx(e,{option:a,checked:t,onClick:h,disabled:c})})},Oe=ds,us=({options:e,onClick:a,skipIndex:t})=>{let{disabled:s,value:c,onChange:d,ItemRenderer:m}=G(),o=(i,n)=>{s||d(n?[...c,i]:c.filter(h=>h.value!==i.value))};return r.jsx(r.Fragment,{children:e.map((i,n)=>{let h=n+t;return r.jsx("li",{children:r.jsx(Oe,{tabIndex:h,option:i,onSelectionChanged:p=>o(i,p),checked:!!c.find(p=>p.value===i.value),onClick:p=>a(p,h),itemRenderer:m,disabled:i.disabled||s})},(i==null?void 0:i.key)||n)})})},ms=us,ps=()=>{let{t:e,onChange:a,options:t,setOptions:s,value:c,filterOptions:d,ItemRenderer:m,disabled:o,disableSearch:i,hasSelectAll:n,ClearIcon:h,debounceDuration:p,isCreatable:N,onCreateOption:b}=G(),j=l.useRef(),C=l.useRef(),[x,L]=l.useState(""),[A,P]=l.useState(t),[_,I]=l.useState(""),[w,R]=l.useState(0),W=l.useCallback(ls(u=>I(u),p),[]),O=l.useMemo(()=>{let u=0;return i||(u+=1),n&&(u+=1),u},[i,n]),V={label:e(x?"selectAllFiltered":"selectAll"),value:""},B=u=>{let g=A.filter(D=>!D.disabled).map(D=>D.value);if(u){let D=[...c.map(ne=>ne.value),...g];return(d?A:t).filter(ne=>D.includes(ne.value))}return c.filter(D=>!g.includes(D.value))},Z=u=>{let g=B(u);a(g)},S=u=>{W(u.target.value),L(u.target.value),R(0)},U=()=>{var u;I(""),L(""),(u=C==null?void 0:C.current)==null||u.focus()},z=u=>R(u),ee=u=>{switch(u.code){case k.ARROW_UP:q(-1);break;case k.ARROW_DOWN:q(1);break;default:return}u.stopPropagation(),u.preventDefault()};Y([k.ARROW_DOWN,k.ARROW_UP],ee,{target:j});let se=()=>{R(0)},J=async()=>{let u={label:x,value:x,__isNew__:!0};b&&(u=await b(x)),s([u,...t]),U(),a([...c,u])},re=async()=>d?await d(t,_):os(t,_),q=u=>{let g=w+u;g=Math.max(0,g),g=Math.min(g,t.length+Math.max(O-1,0)),R(g)};l.useEffect(()=>{var u,g;(g=(u=j==null?void 0:j.current)==null?void 0:u.querySelector(`[tabIndex='${w}']`))==null||g.focus()},[w]);let[ae,te]=l.useMemo(()=>{let u=A.filter(g=>!g.disabled);return[u.every(g=>c.findIndex(D=>D.value===g.value)!==-1),u.length!==0]},[A,c]);l.useEffect(()=>{re().then(P)},[_,t]);let f=l.useRef();Y([k.ENTER],J,{target:f});let E=N&&x&&!A.some(u=>(u==null?void 0:u.value)===x);return r.jsxs("div",{className:"select-panel",role:"listbox",ref:j,children:[!i&&r.jsxs("div",{className:"search",children:[r.jsx("input",{placeholder:e("search"),type:"text","aria-describedby":e("search"),onChange:S,onFocus:se,value:x,ref:C,tabIndex:0}),r.jsx("button",{type:"button",className:"search-clear-button",hidden:!x,onClick:U,"aria-label":e("clearSearch"),children:h||r.jsx(Te,{})})]}),r.jsxs("ul",{className:"options",children:[n&&te&&r.jsx(Oe,{tabIndex:O===1?0:1,checked:ae,option:V,onSelectionChanged:Z,onClick:()=>z(1),itemRenderer:m,disabled:o}),A.length?r.jsx(ms,{skipIndex:O,options:A,onClick:(u,g)=>z(g)}):E?r.jsx("li",{onClick:J,className:"select-item creatable",tabIndex:1,ref:f,children:`${e("create")} "${x}"`}):r.jsx("li",{className:"no-options",children:e("noOptions")})]})]})},hs=ps,fs=({expanded:e})=>r.jsx("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"dropdown-heading-dropdown-arrow gray",children:r.jsx("path",{d:e?"M18 15 12 9 6 15":"M6 9L12 15 18 9"})}),vs=()=>{let{t:e,value:a,options:t,valueRenderer:s}=G(),c=a.length===0,d=a.length===t.length,m=s&&s(a,t);return c?r.jsx("span",{className:"gray",children:m||e("selectSomeItems")}):r.jsx("span",{children:m||(d?e("allItemsAreSelected"):a.map(o=>o.label).join(", "))})},xs=({size:e=24})=>r.jsx("span",{style:{width:e,marginRight:"0.2rem"},children:r.jsx("svg",{width:e,height:e,className:"spinner",viewBox:"0 0 50 50",style:{display:"inline",verticalAlign:"middle"},children:r.jsx("circle",{cx:"25",cy:"25",r:"20",fill:"none",className:"path"})})}),gs=()=>{let{t:e,onMenuToggle:a,ArrowRenderer:t,shouldToggleOnHover:s,isLoading:c,disabled:d,onChange:m,labelledBy:o,value:i,isOpen:n,defaultIsOpen:h,ClearSelectedIcon:p,closeOnChangedValue:N}=G();l.useEffect(()=>{N&&x(!1)},[i]);let[b,j]=l.useState(!0),[C,x]=l.useState(h),[L,A]=l.useState(!1),P=t||fs,_=l.useRef();ts(()=>{a&&a(C)},[C]),l.useEffect(()=>{h===void 0&&typeof n=="boolean"&&(j(!1),x(n))},[n]);let I=S=>{var U;["text","button"].includes(S.target.type)&&[k.SPACE,k.ENTER].includes(S.code)||(b&&(S.code===k.ESCAPE?(x(!1),(U=_==null?void 0:_.current)==null||U.focus()):x(!0)),S.preventDefault())};Y([k.ENTER,k.ARROW_DOWN,k.SPACE,k.ESCAPE],I,{target:_});let w=S=>{b&&s&&x(S)},R=()=>!L&&A(!0),W=S=>{!S.currentTarget.contains(S.relatedTarget)&&b&&(A(!1),x(!1))},O=()=>w(!0),V=()=>w(!1),B=()=>{b&&x(c||d?!1:!C)},Z=S=>{S.stopPropagation(),m([]),b&&x(!1)};return r.jsxs("div",{tabIndex:0,className:"dropdown-container","aria-labelledby":o,"aria-expanded":C,"aria-readonly":!0,"aria-disabled":d,ref:_,onFocus:R,onBlur:W,onMouseEnter:O,onMouseLeave:V,children:[r.jsxs("div",{className:"dropdown-heading",onClick:B,children:[r.jsx("div",{className:"dropdown-heading-value",children:r.jsx(vs,{})}),c&&r.jsx(xs,{}),i.length>0&&p!==null&&r.jsx("button",{type:"button",className:"clear-selected-button",onClick:Z,disabled:d,"aria-label":e("clearSelected"),children:p||r.jsx(Te,{})}),r.jsx(P,{expanded:C})]}),C&&r.jsx("div",{className:"dropdown-content",children:r.jsx("div",{className:"panel-content",children:r.jsx(hs,{})})})]})},Cs=gs,bs=e=>r.jsx(as,{props:e,children:r.jsx("div",{className:`rmsc ${e.className||"multi-select"}`,children:r.jsx(Cs,{})})}),ys=bs;const Ds=()=>{const[e,a]=l.useState([]),[t,s]=l.useState([]),[c,d]=l.useState(null),[m,o]=l.useState(!1),[i,n]=l.useState(""),[h,p]=l.useState(""),[N,b]=l.useState(""),[j,C]=l.useState("");Pe();const[x,L]=l.useState([]),[A,P]=l.useState(""),[_,I]=l.useState(!1),[w,R]=l.useState([]),[W,O]=l.useState(!1),[V,B]=l.useState(null),[Z,S]=l.useState([]);l.useEffect(()=>{I(!1),z(),ee(),U()},[]);const U=async()=>{try{const f=await ye();a(f)}catch{d("Failed to load panels"),$("Internal server error",2)}},z=async()=>{try{const f=await ye();s(f),console.log(f)}catch{d("Failed to load panels"),$("Internal server error",2)}},ee=async()=>{try{const f=await Ke();L(f);const E=f.map(u=>({panel_name:u.panel_name,panel_id:u.panel_id,label:u.panel_name,value:u.panel_id}));S(E)}catch{d("Failed to load panels"),$("Internal server error",2)}},se=async f=>{try{const E=await ze(f);$("Deleted successfully",1),U(),z()}catch{d("Failed to load panels"),$("Internal server error",2)}},J=async f=>{I(!0),P(f),R([]);const E=e.find(u=>u.user_id===f);if(E){console.log(E);const u=E.assignments.map(g=>({panel_name:g.panel_name,panel_id:g.panel_id,label:g.panel_name,value:g.panel_id}));R(u),n(E.user_name),p(E.email_id),C(E.phone_number),o(!0)}},re=async()=>{try{if(_){const f=w.map(u=>({panel_id:u.panel_id})),E=await We({name:i,email_id:h,phone_number:j,panels:f},A);$("User updated successfully",1)}else{const f=w.map(u=>({panel_id:u.panel_id})),E=await Be({name:i,email_id:h,phone_number:j,panels:f});$("User added successfully",1)}P(""),n(""),p(""),C(""),o(!1),U(),z(),I(!1),R([])}catch(f){console.error("Failed to save panel:",f),d("Failed to save panel"),$("Internal server error",2)}},q=async()=>{P(""),I(!1),n(""),p(""),C(""),o(!1)},ae=f=>{B(f),O(!0)},te=async()=>{try{se(V),O(!1),B(null)}catch(f){console.error("Failed to delete user",f)}};return r.jsxs(r.Fragment,{children:[r.jsx(H,{children:r.jsx(K,{xs:12,children:r.jsxs(Ne,{className:"mb-4",children:[r.jsxs(He,{children:[r.jsx("strong",{children:"Users"}),r.jsx(Q,{color:"primary",size:"sm",className:"float-end",onClick:()=>o(!m),children:"Add User"})]}),r.jsx(je,{children:r.jsx(H,{xs:{gutter:4},children:t.length>0?t.map((f,E)=>r.jsx(K,{xs:12,sm:12,xl:6,xxl:6,children:r.jsx(de,{activeItemKey:0,children:r.jsxs(xe,{itemKey:f.user_id,children:[r.jsx(ve,{children:r.jsxs("div",{className:"d-flex w-100 justify-content-between align-items-center",children:[r.jsxs("span",{children:[" ",r.jsx(le,{icon:Ve,size:"sm"})," ",f.user_name,"  (No. of panels assigned - ",f.assignments.length,")"]}),r.jsxs("div",{children:[r.jsx(le,{icon:Ge,style:{marginRight:"7px",cursor:"default"},size:"sm",onClick:()=>J(f.user_id)}),r.jsx(le,{icon:Ze,style:{marginRight:"7px",cursor:"default"},size:"sm",onClick:()=>ae(f.user_id)})]})]})}),r.jsx(he,{children:r.jsx(H,{xs:{gutter:4},children:f.assignments.map((u,g)=>r.jsx(K,{xs:12,sm:6,xl:6,xxl:6,children:r.jsx(Ne,{className:"mb-3",children:r.jsxs(je,{children:[r.jsx(be,{children:u.panel_name}),r.jsxs(Ce,{children:["Secret Code: ",u.secret_code]}),r.jsx(ge,{href:`data:image/png;base64,${u.qr_code_base64}`,download:`${u.panel_name}_${f.user_name}.png`,children:"Download QR Code"})]})})}))})})]})})},E)):r.jsx(K,{xs:12,sm:12,xl:12,xxl:12,children:"No record found"},"no-record")})})]})})}),r.jsxs(Ee,{size:"lg",visible:m,onClose:()=>q(),children:[r.jsx(we,{children:r.jsx(Se,{children:"Add User"})}),r.jsx(Ae,{children:r.jsxs(qe,{children:[r.jsx(H,{className:"g-3",children:r.jsxs(K,{xs:!0,children:[r.jsx(X,{htmlFor:"username",children:"Name"}),r.jsx(oe,{type:"text",id:"username",value:i,autoComplete:"off",onChange:f=>n(f.target.value)})]})}),r.jsxs(H,{className:"g-3",children:[r.jsxs(K,{xs:!0,children:[r.jsx(X,{htmlFor:"email_id",children:"Email Id"}),r.jsx(oe,{type:"text",id:"email_id",value:h,autoComplete:"off",onChange:f=>p(f.target.value)})]}),r.jsxs(K,{xs:!0,children:[r.jsx(X,{htmlFor:"phone_number",children:"Phone Number"}),r.jsx(oe,{type:"text",id:"phone_number",value:j,autoComplete:"off",onChange:f=>C(f.target.value)})]})]}),r.jsx(H,{children:r.jsxs(K,{xs:!0,children:[r.jsx(X,{htmlFor:"panel_select",children:"Panel"}),r.jsx(ys,{options:Z,value:w,onChange:R,labelledBy:"Select"})]})})]})}),r.jsxs(ke,{children:[r.jsx(Q,{color:"secondary",onClick:()=>q(),children:"Close"}),r.jsx(Q,{color:"primary",onClick:re,children:"Save changes"})]})]}),r.jsxs(Ee,{visible:W,onClose:()=>O(!1),children:[r.jsx(we,{children:r.jsx(Se,{children:"Confirm Deletion"})}),r.jsx(Ae,{children:"Are you sure you want to delete this user?"}),r.jsxs(ke,{children:[r.jsx(Q,{color:"secondary",onClick:()=>O(!1),children:"Cancel"}),r.jsx(Q,{color:"danger",onClick:()=>te(),children:"Delete"})]})]})]})};export{Ds as default};
