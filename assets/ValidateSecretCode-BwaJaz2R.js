import{a as i,q as p,n as u,j as e}from"./index-CZt83LK4.js";import{b as y,a as j}from"./index.esm-CLmi5pCK.js";import{u as v,v as g}from"./api-CWYGUJ6F.js";import{c as a}from"./toastUtils-D1hspjWq.js";import{C as S,H as b}from"./hz_logo_5-D5PyajDh.js";import{C as w}from"./QRCodeCss-CNrmda0C.js";import{C as N,a as L}from"./CRow-CSkPSwyb.js";import{C as d,a as l}from"./CCardBody-D9ngTYt-.js";import{C as V}from"./CForm-DMxkCchm.js";import{C as A}from"./CInputGroup-DqjVmbYr.js";import{C as I}from"./CFormInput-CvH69kim.js";const R=()=>{const[r,m]=i.useState(""),{code:c}=p(),C=u();i.useEffect(()=>{f(c)},[c]);const f=async s=>{const o=Uint8Array.from(atob(s),h=>h.charCodeAt(0)),n=new TextDecoder().decode(o),t=await v(0,n,"3");console.log(t)},x=async s=>{s.preventDefault();try{const o=Uint8Array.from(atob(c),t=>t.charCodeAt(0)),n=new TextDecoder().decode(o);if(r==""||r==null)a("Please enter Secret Code",2);else if(r==n){const t=await g(r);a("Verified Successfully",1),C("/file-viewer/"+t.access_token)}else a("Invalid Secret Code or Link expired! Please scan again!",2)}catch{a("Internal server error",2)}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(y,{children:e.jsx(N,{className:"justify-content-center",children:e.jsx(L,{md:8,children:e.jsx(w,{children:e.jsx(d,{className:"p-4 VSCFileCardBorderColor",children:e.jsxs(l,{children:[e.jsx(d,{className:"text-white VSCFileCardBorderColor",style:{width:"100%",borderColor:"#fff !important"},children:e.jsx(l,{className:"text-center",children:e.jsx("div",{children:e.jsx(S,{rounded:!0,src:b,style:{width:"100%"},alt:"Hertz Logo"})})})}),e.jsxs(V,{onSubmit:x,children:[e.jsx("h1",{className:"text-center",children:"Verify Secret Code"}),e.jsx("p",{className:"text-body-secondary text-center",children:"Enter your valide secret code to view files!"}),e.jsxs(A,{className:"mb-3",children:[e.jsx(I,{placeholder:"Secret Code",value:r,onChange:s=>m(s.target.value)}),e.jsx(j,{type:"submit",color:"success",className:"px-4 text-white",style:{float:"right",color:"#fff"},children:"Verify"})]})]})]})})})})})})})};export{R as default};
